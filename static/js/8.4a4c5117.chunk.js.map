{"version":3,"sources":["components/containers/error-boundary/ErrorBoundary.tsx","contexts/AuthContext.ts","components/login/useAuth.ts","components/App.tsx"],"names":["styles","createStyles","header","fontSize","textAlign","icon","marginLeft","width","height","ErrorBoundary","state","hasError","error","Error","this","setState","classes","props","key","className","process","children","React","Component","withStyles","AuthContext","createContext","userInfo","loading","setUserInfo","_userInfo","useAuth","useState","setLoading","history","useHistory","useEffect","a","fetch","headers","credentials","response","json","name","push","fetchUserInfo","Application","lazy","Login","App","auth","Provider","value","path","component","to"],"mappings":"wNAIMA,EAASC,YAAa,CAC1BC,OAAQ,CACNC,SAAU,GACVC,UAAW,UAEbC,KAAM,CACJC,WAAY,MACZC,MAAO,MACPC,OAAQ,SASNC,E,2MACJC,MAAQ,CAAEC,UAAU,EAAOC,MAAO,IAAIC,O,iFAEpBD,GAChBE,KAAKC,SAAS,CAAEJ,UAAU,EAAMC,Y,+BAGP,IACjBI,EAAYF,KAAKG,MAAjBD,QAER,OAAIF,KAAKJ,MAAMC,SAEX,kBAAC,WAAD,KACE,wBAAIO,IAAI,uBAAuBC,UAAWH,EAAQd,QAAlD,UAGA,kBAAC,IAAD,CAAWgB,IAAI,8BAA8BC,UAAWH,EAAQX,QAE/De,GAWAN,KAAKG,MAAMI,a,GA7BMC,IAAMC,WAiCnBC,gBAAWxB,EAAXwB,CAAmBf,I,iCCtDlC,WAGMgB,EAAcC,wBAAyB,CAC3CC,SAAU,KACVC,SAAS,EAETC,YAJ2C,SAI/BC,OAKCL,O,wHCiDAM,EAvCU,WAAO,IAAD,EACCC,oBAAS,GADV,mBACtBJ,EADsB,KACbK,EADa,OAEGD,mBAA0B,MAF7B,mBAEtBL,EAFsB,KAEZE,EAFY,KAGvBK,EAAUC,cA6BhB,OA3BAC,qBAAU,WAsBJR,GArBe,uCAAG,8BAAAS,EAAA,sEAGGC,MAAM,GAAD,OA3BjBlB,uCA2BiB,cAA0B,CAGpDmB,QAAS,CAAE,oCAAoC,GAG/CC,YAAa,YATK,cAGdC,EAHc,gBAWGA,EAASC,OAXZ,QAWdf,EAXc,QAaPgB,MACXT,EAAQU,KAAK,QAGfX,GAAW,GACXJ,EAAYF,GAlBQ,2CAAH,oDAsBjBkB,KAED,CAACjB,EAASM,EAASD,EAAYJ,IAE3B,CACLF,WACAE,cACAD,YCnDEkB,EAAcxB,IAAMyB,MAAK,kBAAM,8DAC/BC,EAAQ1B,IAAMyB,MAAK,kBAAM,8DAkBhBE,UAhBC,WACd,IAAMC,EAAOnB,IAEb,OACE,kBAACtB,EAAA,EAAD,KACE,kBAACgB,EAAA,EAAY0B,SAAb,CAAsBC,MAAOF,GAC3B,kBAAC,IAAD,CAAOG,KAAK,SAASC,UAAWN,IAChC,kBAAC,IAAD,CAAOK,KAAK,OAAOC,UAAWR,IAC9B,kBAAC,IAAD,CAAOO,KAAK,MACV,kBAAC,IAAD,CAAUE,GAAG","file":"static/js/8.4a4c5117.chunk.js","sourcesContent":["import { createStyles, WithStyles, withStyles } from '@material-ui/core';\nimport { BugReport } from '@material-ui/icons';\nimport React, { Fragment } from 'react';\n\nconst styles = createStyles({\n  header: {\n    fontSize: 72,\n    textAlign: 'center',\n  },\n  icon: {\n    marginLeft: '15%',\n    width: '70%',\n    height: '70%',\n  },\n});\n\ninterface State {\n  hasError: boolean;\n  error: Error;\n}\n\nclass ErrorBoundary extends React.Component<WithStyles, State> {\n  state = { hasError: false, error: new Error() };\n\n  componentDidCatch(error: Error) {\n    this.setState({ hasError: true, error });\n  }\n\n  render(): React.ReactNode {\n    const { classes } = this.props;\n\n    if (this.state.hasError) {\n      return (\n        <Fragment>\n          <h1 key=\"ErrorBoundary:Header\" className={classes.header}>\n            ERROR!\n          </h1>\n          <BugReport key=\"ErrorBoundary:BugReportIcon\" className={classes.icon} />\n          {/* eslint-disable-next-line no-undef */}\n          {process.env.NODE_ENV === 'development' && (\n            <div>\n              <div>{this.state.error.name}</div>\n              <div>{this.state.error.message}</div>\n              <div>{this.state.error.stack}</div>\n            </div>\n          )}\n        </Fragment>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default withStyles(styles)(ErrorBoundary);\n","import { createContext } from 'react';\nimport { AuthProps, UserInfo } from '../components/login/useAuth';\n\nconst AuthContext = createContext<AuthProps>({\n  userInfo: null,\n  loading: true,\n\n  setUserInfo(_userInfo: UserInfo) {\n    return;\n  },\n});\n\nexport default AuthContext;\n","import { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\n// eslint-disable-next-line no-undef\nconst API_HOST = process.env.REACT_APP_API_HOST || '';\n\nexport interface UserInfo {\n  name: string;\n  photo: string;\n}\n\nexport interface AuthProps {\n  userInfo: UserInfo | null;\n  loading: boolean;\n\n  setUserInfo(_userInfo: UserInfo): void;\n}\n\nexport interface UseAuth {\n  (): AuthProps;\n}\n\nconst useAuth: UseAuth = () => {\n  const [loading, setLoading] = useState(true);\n  const [userInfo, setUserInfo] = useState<UserInfo | null>(null);\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchUserInfo = async () => {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const response = await fetch(`${API_HOST}/user-info`, {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        headers: { 'Access-Control-Allow-Credentials': true },\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        credentials: 'include',\n      });\n      const userInfo = await response.json();\n\n      if (userInfo.name) {\n        history.push('/app');\n      }\n\n      setLoading(false);\n      setUserInfo(userInfo);\n    };\n\n    if (loading) {\n      fetchUserInfo();\n    }\n  }, [loading, history, setLoading, setUserInfo]);\n\n  return {\n    userInfo,\n    setUserInfo,\n    loading,\n  };\n};\n\nexport default useAuth;\n","import React, { FC } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport AuthContext from '../contexts/AuthContext';\nimport ErrorBoundary from './containers/error-boundary/ErrorBoundary';\nimport useAuth from './login/useAuth';\n\nconst Application = React.lazy(() => import('./Application'));\nconst Login = React.lazy(() => import('./login/Login'));\n\nconst App: FC = () => {\n  const auth = useAuth();\n\n  return (\n    <ErrorBoundary>\n      <AuthContext.Provider value={auth}>\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/app\" component={Application} />\n        <Route path=\"/*\">\n          <Redirect to=\"/login\" />\n        </Route>\n      </AuthContext.Provider>\n    </ErrorBoundary>\n  );\n};\n\nexport default App;\n"],"sourceRoot":""}